var jr=Object.defineProperty;var jt=e=>{throw TypeError(e)};var Sr=(e,t,r)=>t in e?jr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var He=(e,t,r)=>Sr(e,typeof t!="symbol"?t+"":t,r),rt=(e,t,r)=>t.has(e)||jt("Cannot "+r);var v=(e,t,r)=>(rt(e,t,"read from private field"),r?r.call(e):t.get(e)),W=(e,t,r)=>t.has(e)?jt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),F=(e,t,r,s)=>(rt(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),Ie=(e,t,r)=>(rt(e,t,"access private method"),r);import{B as Tr,a as we,c as Ar,p as Xe,s as Le,d as Vt,T as St,I as Tt}from"./chunks/shared.js";import{json as oe,text as G,error as st}from"@sveltejs/kit";import{HttpError as Ae,SvelteKitError as Z,Redirect as ae,ActionFailure as tt}from"@sveltejs/kit/internal";import{with_request_store as J,merge_tracing as Pe}from"@sveltejs/kit/internal/server";import{a as ie,b as B,c as Oe,r as Or,o as qr,d as At}from"./chunks/environment.js";import*as K from"devalue";import{m as Pr,d as Xt,a as Kt,v as Cr,b as zr,c as Nr,e as Ur,n as yt,r as Ot,f as Hr}from"./chunks/exports.js";import{b as qt,t as Ir,a as Je,g as Lr}from"./chunks/utils.js";import{n as nt,s as Dr}from"./chunks/ssr.js";import{p as lt,r as Pt,o as Wr,s as Mr,a as Fr,g as Gr,b as Br}from"./chunks/internal.js";import{parse as Ke,serialize as ut}from"cookie";import*as Ct from"set-cookie-parser";function Yt(){let e,t;return{promise:new Promise((s,n)=>{e=s,t=n}),resolve:e,reject:t}}const Jr=[101,103,204,205,304];var Bt,Jt;const Vr=!!((Jt=(Bt=globalThis.process)==null?void 0:Bt.versions)!=null&&Jt.webcontainer),Xr="/_svelte_kit_assets",Qt=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],Kr=["GET","POST","HEAD"];function gt(e,t){const r=[];e.split(",").forEach((a,o)=>{const c=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(a);if(c){const[,i,l,u="1"]=c;r.push({type:i,subtype:l,q:+u,i:o})}}),r.sort((a,o)=>a.q!==o.q?o.q-a.q:a.subtype==="*"!=(o.subtype==="*")?a.subtype==="*"?1:-1:a.type==="*"!=(o.type==="*")?a.type==="*"?1:-1:a.i-o.i);let s,n=1/0;for(const a of t){const[o,c]=a.split("/"),i=r.findIndex(l=>(l.type===o||l.type==="*")&&(l.subtype===c||l.subtype==="*"));i!==-1&&i<n&&(s=a,n=i)}return s}function Yr(e,...t){var s,n;const r=(n=(s=e.headers.get("content-type"))==null?void 0:s.split(";",1)[0].trim())!=null?n:"";return t.includes(r.toLowerCase())}function wt(e){return Yr(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain",Tr)}function Qr(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function qe(e){return e instanceof Ae||e instanceof Z?e.status:500}function Zr(e){return e instanceof Z?e.text:"Internal Error"}const Zt={"&":"&amp;",'"':"&quot;"},er={"&":"&amp;","<":"&lt;"},tr="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",es=new RegExp(`[${Object.keys(Zt).join("")}]|`+tr,"g"),ts=new RegExp(`[${Object.keys(er).join("")}]|`+tr,"g");function bt(e,t){const r=t?Zt:er;return e.replace(t?es:ts,n=>{var a;return n.length===2?n:(a=r[n])!=null?a:`&#${n.charCodeAt(0)};`})}function rr(e,t){return G(`${t} method not allowed`,{status:405,headers:{allow:rs(e).join(", ")}})}function rs(e){const t=Qt.filter(r=>r in e);return"GET"in e&&!("HEAD"in e)&&t.push("HEAD"),t}function sr(e){return`__sveltekit_${e.version_hash}`}function Qe(e,t,r){let s=e.templates.error({status:t,message:bt(r)});return G(s,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function zt(e,t,r,s){s=s instanceof Ae?s:Qr(s);const n=qe(s),a=await ee(e,t,r,s),o=gt(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||o==="application/json"?oe(a,{status:n}):Qe(r,n,a.message)}async function ee(e,t,r,s){var o;if(s instanceof Ae)return{message:"Unknown Error",...s.body};const n=qe(s),a=Zr(s);return(o=await J({event:e,state:t},()=>r.hooks.handleError({error:s,event:e,status:n,message:a})))!=null?o:{message:a}}function Ze(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function nr(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (${t.path}). If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function ar(e){var r,s,n;const t={};return e.uses&&e.uses.dependencies.size>0&&(t.dependencies=Array.from(e.uses.dependencies)),e.uses&&e.uses.search_params.size>0&&(t.search_params=Array.from(e.uses.search_params)),e.uses&&e.uses.params.size>0&&(t.params=Array.from(e.uses.params)),(r=e.uses)!=null&&r.parent&&(t.parent=1),(s=e.uses)!=null&&s.route&&(t.route=1),(n=e.uses)!=null&&n.url&&(t.url=1),t}function or(e,t){return e._.prerendered_routes.has(t)||t.at(-1)==="/"&&e._.prerendered_routes.has(t.slice(0,-1))}function ss(e,t,r){const s=`
\x1B[1;31m[${e}] ${r.request.method} ${r.url.pathname}\x1B[0m`;return e===404?s:`${s}
${t.stack}`}function ir(e){const t=e==null?void 0:e.split("/"),r=t==null?void 0:t.at(-1);return r?r.split(".").slice(0,-1).join("."):"unknown"}async function ns(e,t,r,s){var c;const n=e.request.method;let a=r[n]||r.fallback;if(n==="HEAD"&&!r.HEAD&&r.GET&&(a=r.GET),!a)return rr(r,n);const o=(c=r.prerender)!=null?c:s.prerender_default;if(o&&(r.POST||r.PATCH||r.PUT||r.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(s.prerendering&&!s.prerendering.inside_reroute&&!o){if(s.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}t.is_endpoint_request=!0;try{const i=await J({event:e,state:t},()=>a(e));if(!(i instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);if(s.prerendering&&(!s.prerendering.inside_reroute||o)){const l=new Response(i.clone().body,{status:i.status,statusText:i.statusText,headers:new Headers(i.headers)});if(l.headers.set("x-sveltekit-prerender",String(o)),s.prerendering.inside_reroute&&o)l.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),s.prerendering.dependencies.set(e.url.pathname,{response:l,body:null});else return l}return i}catch(i){if(i instanceof ae)return new Response(void 0,{status:i.status,headers:{location:i.location}});throw i}}function as(e){var n;const{method:t,headers:r}=e.request;if(Qt.includes(t)&&!Kr.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const s=(n=e.request.headers.get("accept"))!=null?n:"*/*";return gt(s,["*","text/html"])!=="text/html"}function dt(e){return e.filter(t=>t!=null)}const kt="/__data.json",et=".html__data.json";function os(e){return e.endsWith(kt)||e.endsWith(et)}function $t(e){return e.endsWith(".html")?e.replace(/\.html$/,et):e.replace(/\/$/,"")+kt}function is(e){return e.endsWith(et)?e.slice(0,-et.length)+".html":e.slice(0,-kt.length)}const Et="/__route.js";function cs(e){return e.endsWith(Et)}function cr(e){return e.replace(/\/$/,"")+Et}function ls(e){return e.slice(0,-Et.length)}const us={spanContext(){return ds},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this},addLink(){return this},addLinks(){return this}},ds={traceId:"",spanId:"",traceFlags:0};async function de({name:e,attributes:t,fn:r}){return r(us)}function lr(e){var r;return gt((r=e.request.headers.get("accept"))!=null?r:"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function fs(e,t,r,s){const n=s==null?void 0:s.actions;if(!n){const a=new Z(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return Me({type:"error",error:await ee(e,t,r,a)},{status:a.status,headers:{allow:"GET"}})}dr(n);try{const a=await fr(e,t,n);return a instanceof tt?Me({type:"failure",status:a.status,data:Nt(a.data,e.route.id,r.hooks.transport)}):Me({type:"success",status:a?200:204,data:Nt(a,e.route.id,r.hooks.transport)})}catch(a){const o=a;return o instanceof ae?ur(o):Me({type:"error",error:await ee(e,t,r,xt(o))},{status:qe(o)})}}function xt(e){return e instanceof tt?new Error('Cannot "throw fail()". Use "return fail()"'):e}function ur(e){return Me({type:"redirect",status:e.status,location:e.location})}function Me(e,t){return oe(e,t)}function ps(e){return e.request.method==="POST"}async function hs(e,t,r){const s=r==null?void 0:r.actions;if(!s)return e.setHeaders({allow:"GET"}),{type:"error",error:new Z(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};dr(s);try{const n=await fr(e,t,s);return n instanceof tt?{type:"failure",status:n.status,data:n.data}:{type:"success",status:200,data:n}}catch(n){const a=n;return a instanceof ae?{type:"redirect",status:a.status,location:a.location}:{type:"error",error:xt(a)}}}function dr(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function fr(e,t,r){const s=new URL(e.request.url);let n="default";for(const o of s.searchParams)if(o[0].startsWith("/")){if(n=o[0].slice(1),n==="default")throw new Error('Cannot use reserved action name "default"');break}const a=r[n];if(!a)throw new Z(404,"Not Found",`No action with name '${n}' found`);if(!wt(e.request))throw new Z(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return de({name:"sveltekit.form_action",attributes:{"http.route":e.route.id||"unknown"},fn:async o=>{const c=Pe(e,o),i=await J({event:c,state:t},()=>a(c));return i instanceof tt&&o.setAttributes({"sveltekit.form_action.result.type":"failure","sveltekit.form_action.result.status":i.status}),i}})}function _s(e,t,r){const s=n=>{for(const a in r){const o=r[a].encode(n);if(o)return`app.decode('${a}', ${K.uneval(o,s)})`}};return pr(e,n=>K.uneval(n,s),t)}function Nt(e,t,r){const s=Object.fromEntries(Object.entries(r).map(([n,a])=>[n,a.encode]));return pr(e,n=>K.stringify(n,s),t)}function pr(e,t,r){try{return t(e)}catch(s){const n=s;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in n){let a=`Data returned from action inside ${r} is not serializable: ${n.message}`;throw n.path!==""&&(a+=` (data.${n.path})`),new Error(a)}throw n}}function hr(){let e=-1,t=-1;const r=[];return{iterate:(s=n=>n)=>({[Symbol.asyncIterator](){return{next:async()=>{const n=r[++t];if(!n)return{value:null,done:!0};const a=await n.promise;return{value:s(a),done:!1}}}}}),add:s=>{r.push(Yt()),s.then(n=>{r[++e].resolve(n)})}}}function Ge(e,t,r){let s=1,n=-1;const a=hr(),o=sr(r);function c(l){return function u(f){if(typeof(f==null?void 0:f.then)=="function"){const w=s++,p=f.then(y=>({data:y})).catch(async y=>({error:await ee(e,t,r,y)})).then(async({data:y,error:h})=>{let d;try{d=K.uneval(h?[,h]:[y],u)}catch{h=await ee(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),y=void 0,d=K.uneval([,h],u)}return{index:l,str:`${o}.resolve(${w}, ${d.includes("app.decode")?`(app) => ${d}`:`() => ${d}`})`}});return a.add(p),`${o}.defer(${w})`}else for(const w in r.hooks.transport){const p=r.hooks.transport[w].encode(f);if(p)return`app.decode('${w}', ${K.uneval(p,u)})`}}}const i=[];return{set_max_nodes(l){n=l},add_node(l,u){try{if(!u){i[l]="null";return}const f={type:"data",data:u.data,uses:ar(u)};u.slash&&(f.slash=u.slash),i[l]=K.uneval(f,c(l))}catch(f){throw f.path=f.path.slice(1),new Error(nr(e,f))}},get_data(l){const u=`<script${l.script_needs_nonce?` nonce="${l.nonce}"`:""}>`,f=`<\/script>
`;return{data:`[${dt(n>-1?i.slice(0,n):i).join(",")}]`,chunks:s>1?a.iterate(({index:w,str:p})=>n>-1&&w>=n?"":u+p+f):null}}}}function _r(e,t,r){let s=1;const n=hr(),a={...Object.fromEntries(Object.entries(r.hooks.transport).map(([c,i])=>[c,i.encode])),Promise:c=>{if(typeof(c==null?void 0:c.then)!="function")return;const i=s++;let l="data";const u=c.catch(async f=>(l="error",ee(e,t,r,f))).then(async f=>{let w;try{w=K.stringify(f,a)}catch{const p=await ee(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`));l="error",w=K.stringify(p,a)}return`{"type":"chunk","id":${i},"${l}":${w}}
`});return n.add(u),i}},o=[];return{add_node(c,i){try{if(!i){o[c]="null";return}if(i.type==="error"||i.type==="skip"){o[c]=JSON.stringify(i);return}o[c]=`{"type":"data","data":${K.stringify(i.data,a)},"uses":${JSON.stringify(ar(i))}${i.slash?`,"slash":${JSON.stringify(i.slash)}`:""}}`}catch(l){throw l.path="data"+l.path,new Error(nr(e,l))}},get_data(){return{data:`{"type":"data","nodes":[${o.join(",")}]}
`,chunks:s>1?n.iterate():null}}}}async function vt({event:e,event_state:t,state:r,node:s,parent:n}){if(!(s!=null&&s.server))return null;let a=!0;const o={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},c=s.server.load,i=s.server.trailingSlash;if(!c)return{type:"data",data:null,uses:o,slash:i};const l=Pr(e.url,()=>{a&&(o.url=!0)},f=>{a&&o.search_params.add(f)});r.prerendering&&Xt(l);const u=await de({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":s.server_id||"unknown","sveltekit.load.node_type":ir(s.server_id),"http.route":e.route.id||"unknown"},fn:async f=>{const w=Pe(e,f);return await J({event:w,state:t},()=>c.call(null,{...w,fetch:(y,h)=>(new URL(y instanceof Request?y.url:y,e.url),e.fetch(y,h)),depends:(...y)=>{for(const h of y){const{href:d}=new URL(h,e.url);o.dependencies.add(d)}},params:new Proxy(e.params,{get:(y,h)=>(a&&o.params.add(h),y[h])}),parent:async()=>(a&&(o.parent=!0),n()),route:new Proxy(e.route,{get:(y,h)=>(a&&(o.route=!0),y[h])}),url:l,untrack(y){a=!1;try{return y()}finally{a=!0}}}))}});return{type:"data",data:u!=null?u:null,uses:o,slash:i}}async function mr({event:e,event_state:t,fetched:r,node:s,parent:n,server_data_promise:a,state:o,resolve_opts:c,csr:i}){var w,p;const l=await a,u=(w=s==null?void 0:s.universal)==null?void 0:w.load;if(!u)return(p=l==null?void 0:l.data)!=null?p:null;const f=await de({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":s.universal_id||"unknown","sveltekit.load.node_type":ir(s.universal_id),"http.route":e.route.id||"unknown"},fn:async y=>{const h=Pe(e,y);return await J({event:h,state:t},()=>{var d;return u.call(null,{url:e.url,params:e.params,data:(d=l==null?void 0:l.data)!=null?d:null,route:e.route,fetch:ms(e,o,r,i,c),setHeaders:e.setHeaders,depends:()=>{},parent:n,untrack:_=>_(),tracing:h.tracing})})}});return f!=null?f:null}function ms(e,t,r,s,n){const a=async(o,c)=>{var d;const i=o instanceof Request&&o.body?o.clone().body:null,l=o instanceof Request&&[...o.headers].length?new Headers(o.headers):c==null?void 0:c.headers;let u=await e.fetch(o,c);const f=new URL(o instanceof Request?o.url:o,e.url),w=f.origin===e.url.origin;let p;if(w)t.prerendering&&(p={response:u,body:null},t.prerendering.dependencies.set(f.pathname,p));else if(f.protocol==="https:"||f.protocol==="http:")if((o instanceof Request?o.mode:(d=c==null?void 0:c.mode)!=null?d:"cors")==="no-cors")u=new Response("",{status:u.status,statusText:u.statusText,headers:u.headers});else{const g=u.headers.get("access-control-allow-origin");if(!g||g!==e.url.origin&&g!=="*")throw new Error(`CORS error: ${g?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}let y;const h=new Proxy(u,{get(_,g,S){async function b(x,k){const j=Number(_.status);if(isNaN(j))throw new Error(`response.status is not a number. value: "${_.status}" type: ${typeof _.status}`);r.push({url:w?f.href.slice(e.url.origin.length):f.href,method:e.request.method,request_body:o instanceof Request&&i?await ys(i):c==null?void 0:c.body,request_headers:l,response_body:x,response:_,is_b64:k})}if(g==="body"){if(_.body===null)return null;if(y)return y;const[x,k]=_.body.tee();return(async()=>{let j=new Uint8Array;for await(const R of x){const P=new Uint8Array(j.length+R.length);P.set(j,0),P.set(R,j.length),j=P}p&&(p.body=new Uint8Array(j)),b(qt(j),!0)})(),y=k}if(g==="arrayBuffer")return async()=>{const x=await _.arrayBuffer(),k=new Uint8Array(x);return p&&(p.body=k),x instanceof ArrayBuffer&&await b(qt(k),!0),x};async function T(){const x=await _.text();if(x===""&&Jr.includes(_.status)){await b(void 0,!1);return}return(!x||typeof x=="string")&&await b(x,!1),p&&(p.body=x),x}return g==="text"?T:g==="json"?async()=>{const x=await T();return x?JSON.parse(x):void 0}:Reflect.get(_,g,_)}});if(s){const _=u.headers.get;u.headers.get=g=>{const S=g.toLowerCase(),b=_.call(u.headers,S);if(b&&!S.startsWith("x-sveltekit-")&&!n.filterSerializedResponseHeaders(S,b))throw new Error(`Failed to get response header "${S}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return b}}return h};return(o,c)=>{const i=a(o,c);return i.catch(()=>{}),i}}async function ys(e){let t="";const r=e.getReader();for(;;){const{done:s,value:n}=await r.read();if(s)break;t+=Ir.decode(n)}return t}const ke=[];function gs(e,t){return{subscribe:ft(e,t).subscribe}}function ft(e,t=nt){let r;const s=new Set;function n(c){if(Dr(e,c)&&(e=c,r)){const i=!ke.length;for(const l of s)l[1](),ke.push(l,e);if(i){for(let l=0;l<ke.length;l+=2)ke[l][0](ke[l+1]);ke.length=0}}}function a(c){n(c(e))}function o(c,i=nt){const l=[c,i];return s.add(l),s.size===1&&(r=t(n,a)||nt),c(e),()=>{s.delete(l),s.size===0&&r&&(r(),r=null)}}return{set:n,update:a,subscribe:o}}function yr(...e){let t=5381;for(const r of e)if(typeof r=="string"){let s=r.length;for(;s;)t=t*33^r.charCodeAt(--s)}else if(ArrayBuffer.isView(r)){const s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=s.length;for(;n;)t=t*33^s[--n]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const gr={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},ws=new RegExp(`[${Object.keys(gr).join("")}]`,"g");function bs(e,t,r=!1){var u;const s={};let n=null,a=null,o=!1;for(const[f,w]of e.response.headers)t(f,w)&&(s[f]=w),f==="cache-control"?n=w:f==="age"?a=w:f==="vary"&&w.trim()==="*"&&(o=!0);const c={status:e.response.status,statusText:e.response.statusText,headers:s,body:e.response_body},i=JSON.stringify(c).replace(ws,f=>gr[f]),l=['type="application/json"',"data-sveltekit-fetched",`data-url="${bt(e.url,!0)}"`];if(e.is_b64&&l.push("data-b64"),e.request_headers||e.request_body){const f=[];e.request_headers&&f.push([...new Headers(e.request_headers)].join(",")),e.request_body&&f.push(e.request_body),l.push(`data-hash="${yr(...f)}"`)}if(!r&&e.method==="GET"&&n&&!o){const f=(u=/s-maxage=(\d+)/g.exec(n))!=null?u:/max-age=(\d+)/g.exec(n);if(f){const w=+f[1]-+(a!=null?a:"0");l.push(`data-ttl="${w}"`)}}return`<script ${l.join(" ")}>${i}<\/script>`}const V=JSON.stringify;function Ut(e){pt[0]||ks();const t=wr.slice(0),r=$s(e);for(let n=0;n<r.length;n+=16){const a=r.subarray(n,n+16);let o,c,i,l=t[0],u=t[1],f=t[2],w=t[3],p=t[4],y=t[5],h=t[6],d=t[7];for(let _=0;_<64;_++)_<16?o=a[_]:(c=a[_+1&15],i=a[_+14&15],o=a[_&15]=(c>>>7^c>>>18^c>>>3^c<<25^c<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+a[_&15]+a[_+9&15]|0),o=o+d+(p>>>6^p>>>11^p>>>25^p<<26^p<<21^p<<7)+(h^p&(y^h))+pt[_],d=h,h=y,y=p,p=w+o|0,w=f,f=u,u=l,l=o+(u&f^w&(u^f))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;t[0]=t[0]+l|0,t[1]=t[1]+u|0,t[2]=t[2]+f|0,t[3]=t[3]+w|0,t[4]=t[4]+p|0,t[5]=t[5]+y|0,t[6]=t[6]+h|0,t[7]=t[7]+d|0}const s=new Uint8Array(t.buffer);return br(s),btoa(String.fromCharCode(...s))}const wr=new Uint32Array(8),pt=new Uint32Array(64);function ks(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let s=!0;for(let n=2;n*n<=t;n++)if(t%n===0){s=!1;break}s&&(r<8&&(wr[r]=e(t**(1/2))),pt[r]=e(t**(1/3)),r++)}}function br(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],a=e[t+3];e[t+0]=a,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function $s(e){const t=Je.encode(e),r=t.length*8,s=512*Math.ceil((r+65)/512),n=new Uint8Array(s/8);n.set(t),n[t.length]=128,br(n);const a=new Uint32Array(n.buffer);return a[a.length-2]=Math.floor(r/4294967296),a[a.length-1]=r,a}const Ht=new Uint8Array(16);function Es(){return crypto.getRandomValues(Ht),btoa(String.fromCharCode(...Ht))}const xs=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),vs=/^(nonce|sha\d\d\d)-/;var ue,$e,Ee,xe,ve,Re,je,Se,fe,pe,he,_e,me,ce,Te;class kr{constructor(t,r,s){W(this,ue);W(this,$e);W(this,Ee);W(this,xe);W(this,ve);W(this,Re);W(this,je);W(this,Se);W(this,fe);W(this,pe);W(this,he);W(this,_e);W(this,me);W(this,ce);W(this,Te);F(this,ue,t),F(this,fe,r);const n=v(this,fe);F(this,pe,[]),F(this,he,[]),F(this,_e,[]),F(this,me,[]),F(this,ce,[]);const a=n["script-src"]||n["default-src"],o=n["script-src-elem"],c=n["style-src"]||n["default-src"],i=n["style-src-attr"],l=n["style-src-elem"],u=f=>!!f&&!f.some(w=>w==="unsafe-inline");F(this,Ee,u(a)),F(this,xe,u(o)),F(this,Re,u(c)),F(this,je,u(i)),F(this,Se,u(l)),F(this,$e,v(this,Ee)||v(this,xe)),F(this,ve,v(this,Re)||v(this,je)||v(this,Se)),this.script_needs_nonce=v(this,$e)&&!v(this,ue),this.style_needs_nonce=v(this,ve)&&!v(this,ue),F(this,Te,s)}add_script(t){if(!v(this,$e))return;const r=v(this,ue)?`sha256-${Ut(t)}`:`nonce-${v(this,Te)}`;v(this,Ee)&&v(this,pe).push(r),v(this,xe)&&v(this,he).push(r)}add_style(t){if(!v(this,ve))return;const r=v(this,ue)?`sha256-${Ut(t)}`:`nonce-${v(this,Te)}`;if(v(this,Re)&&v(this,_e).push(r),v(this,je)&&v(this,me).push(r),v(this,Se)){const s="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",n=v(this,fe);n["style-src-elem"]&&!n["style-src-elem"].includes(s)&&!v(this,ce).includes(s)&&v(this,ce).push(s),r!==s&&v(this,ce).push(r)}}get_header(t=!1){const r=[],s={...v(this,fe)};v(this,_e).length>0&&(s["style-src"]=[...s["style-src"]||s["default-src"]||[],...v(this,_e)]),v(this,me).length>0&&(s["style-src-attr"]=[...s["style-src-attr"]||[],...v(this,me)]),v(this,ce).length>0&&(s["style-src-elem"]=[...s["style-src-elem"]||[],...v(this,ce)]),v(this,pe).length>0&&(s["script-src"]=[...s["script-src"]||s["default-src"]||[],...v(this,pe)]),v(this,he).length>0&&(s["script-src-elem"]=[...s["script-src-elem"]||[],...v(this,he)]);for(const n in s){if(t&&(n==="frame-ancestors"||n==="report-uri"||n==="sandbox"))continue;const a=s[n];if(!a)continue;const o=[n];Array.isArray(a)&&a.forEach(c=>{xs.has(c)||vs.test(c)?o.push(`'${c}'`):o.push(c)}),r.push(o.join(" "))}return r.join("; ")}}ue=new WeakMap,$e=new WeakMap,Ee=new WeakMap,xe=new WeakMap,ve=new WeakMap,Re=new WeakMap,je=new WeakMap,Se=new WeakMap,fe=new WeakMap,pe=new WeakMap,he=new WeakMap,_e=new WeakMap,me=new WeakMap,ce=new WeakMap,Te=new WeakMap;class Rs extends kr{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content="${bt(t,!0)}">`}}class js extends kr{constructor(t,r,s){var n,a,o,c;if(super(t,r,s),Object.values(r).filter(i=>!!i).length>0){const i=(a=(n=r["report-to"])==null?void 0:n.length)!=null?a:!1,l=(c=(o=r["report-uri"])==null?void 0:o.length)!=null?c:!1;if(!i&&!l)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class Ss{constructor({mode:t,directives:r,reportOnly:s},{prerender:n}){He(this,"nonce",Es());He(this,"csp_provider");He(this,"report_only_provider");const a=t==="hash"||t==="auto"&&n;this.csp_provider=new Rs(a,r,this.nonce),this.report_only_provider=new js(a,s,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function $r(e,t,r){const s={},n=e.slice(1),a=n.filter(c=>c!==void 0);let o=0;for(let c=0;c<t.length;c+=1){const i=t[c];let l=n[c-o];if(i.chained&&i.rest&&o&&(l=n.slice(c-o,c+1).filter(u=>u).join("/"),o=0),l===void 0){i.rest&&(s[i.name]="");continue}if(!i.matcher||r[i.matcher](l)){s[i.name]=l;const u=t[c+1],f=n[c+1];u&&!u.rest&&u.optional&&f&&i.chained&&(o=0),!u&&!f&&Object.keys(s).length===a.length&&(o=0);continue}if(i.optional&&i.chained){o++;continue}return}if(!o)return s}function Er(e,t,r){const{errors:s,layouts:n,leaf:a}=e,o=[...s,...n.map(c=>c==null?void 0:c[1]),a[1]].filter(c=>typeof c=="number").map(c=>{var i;return`'${c}': () => ${xr((i=r._.client.nodes)==null?void 0:i[c],t)}`}).join(`,
		`);return[`{
	id: ${V(e.id)}`,`errors: ${V(e.errors)}`,`layouts: ${V(e.layouts)}`,`leaf: ${V(e.leaf)}`,`nodes: {
		${o}
	}
}`].join(`,
	`)}function xr(e,t){if(!e)return"Promise.resolve({})";if(e[0]==="/")return`import('${e}')`;if(ie!=="")return`import('${ie}/${e}')`;let r=Lr(t.pathname,`${B}/${e}`);return r[0]!=="."&&(r=`./${r}`),`import('${r}')`}async function Ts(e,t,r){if(!r._.client.routes)return G("Server-side route resolution disabled",{status:400});let s=null,n={};const a=await r._.matchers();for(const o of r._.client.routes){const c=o.pattern.exec(e);if(!c)continue;const i=$r(c,o.params,a);if(i){s=o,n=Kt(i);break}}return vr(s,n,t,r).response}function vr(e,t,r,s){const n=new Headers({"content-type":"application/javascript; charset=utf-8"});if(e){const a=Er(e,r,s),o=`${As(e,r,s)}
export const route = ${a}; export const params = ${JSON.stringify(t)};`;return{response:G(o,{headers:n}),body:o}}else return{response:G("",{headers:n}),body:""}}function As(e,t,r){var c;const{errors:s,layouts:n,leaf:a}=e;let o="";for(const i of[...s,...n.map(l=>l==null?void 0:l[1]),a[1]]){if(typeof i!="number")continue;const l=(c=r._.client.css)==null?void 0:c[i];for(const u of l!=null?l:[])o+=`'${ie||B}/${u}',`}return o?`${xr(r._.client.start,t)}.then(x => x.load_css([${o}]));`:""}const Os={...gs(!1),check:()=>!1};async function Be({branch:e,fetched:t,options:r,manifest:s,state:n,page_config:a,status:o,error:c=null,event:i,event_state:l,resolve_opts:u,action_result:f,data_serializer:w}){var Ce,ze,Ne,E,A;if(n.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:p}=s._,y=new Set(p.imports),h=new Set(p.stylesheets),d=new Set(p.fonts),_=new Set,g=new Set,S=new Map;let b;const T=((f==null?void 0:f.type)==="success"||(f==null?void 0:f.type)==="failure")&&(Ce=f.data)!=null?Ce:null;let x=B,k=ie,j=V(B);if((ze=n.prerendering)!=null&&ze.fallback?r.hash_routing&&(j="new URL('.', location).pathname.slice(0, -1)"):(x=i.url.pathname.slice(B.length).split("/").slice(2).map(()=>"..").join("/")||".",j=`new URL(${V(x)}, location).pathname.slice(0, -1)`,(!ie||ie[0]==="/"&&ie!==Xr)&&(k=x)),a.ssr){const m={stores:{page:ft(null),navigating:ft(null),updated:Os},constructors:await Promise.all(e.map(({node:q})=>{if(!q.component)throw new Error(`Missing +page.svelte component for route ${i.route.id}`);return q.component()})),form:T};let $={};for(let q=0;q<e.length;q+=1)$={...$,...e[q].data},m[`data_${q}`]=$;m.page={error:c,params:i.params,route:i.route,status:o,url:i.url,data:$,form:T,state:{}};const z={context:new Map([["__request__",{page:m.page}]])},Q=globalThis.fetch;try{b=await J({event:i,state:l},async()=>{Or&&qr({base:x,assets:k});const q=r.root.render(m,z),N=r.async&&"then"in q?q.then(O=>O):q;r.async&&At();const{head:M,html:L,css:X}=r.async?await N:N;return{head:M,html:L,css:X}})}finally{At()}for(const{node:q}of e){for(const N of q.imports)y.add(N);for(const N of q.stylesheets)h.add(N);for(const N of q.fonts)d.add(N);q.inline_styles&&!p.inline&&Object.entries(await q.inline_styles()).forEach(([N,M])=>S.set(N,M))}}else b={head:"",html:"",css:{code:"",map:null}};let R="",P=b.html;const U=new Ss(r.csp,{prerender:!!n.prerendering}),H=m=>m.startsWith("/")?B+m:`${k}/${m}`,C=p.inline?(Ne=p.inline)==null?void 0:Ne.style:Array.from(S.values()).join(`
`);if(C){const m=[];U.style_needs_nonce&&m.push(` nonce="${U.nonce}"`),U.add_style(C),R+=`
	<style${m.join("")}>${C}</style>`}for(const m of h){const $=H(m),z=['rel="stylesheet"'];S.has(m)?z.push("disabled",'media="(max-width: 0)"'):u.preload({type:"css",path:$})&&_.add(`<${encodeURI($)}>; rel="preload"; as="style"; nopush`),R+=`
		<link href="${$}" ${z.join(" ")}>`}for(const m of d){const $=H(m);if(u.preload({type:"font",path:$})){const z=m.slice(m.lastIndexOf(".")+1);g.add(`<link rel="preload" as="font" type="font/${z}" href="${$}" crossorigin>`),_.add(`<${encodeURI($)}>; rel="preload"; as="font"; type="font/${z}"; crossorigin; nopush`)}}const D=sr(r),{data:te,chunks:re}=w.get_data(U);if(a.ssr&&a.csr&&(P+=`
			${t.map(m=>bs(m,u.filterSerializedResponseHeaders,!!n.prerendering)).join(`
			`)}`),a.csr){const m=(A=(E=s._.client.routes)==null?void 0:E.find(O=>O.id===i.route.id))!=null?A:null;if(p.uses_env_dynamic_public&&n.prerendering&&y.add(`${Oe}/env.js`),!p.inline){const O=Array.from(y,I=>H(I)).filter(I=>u.preload({type:"js",path:I}));for(const I of O)_.add(`<${encodeURI(I)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?R+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${I}">`:g.add(`<link rel="modulepreload" href="${I}">`)}if(n.prerendering&&g.size>0&&(R+=Array.from(g).map(O=>`
		${O}`).join("")),s._.client.routes&&n.prerendering&&!n.prerendering.fallback){const O=cr(i.url.pathname);n.prerendering.dependencies.set(O,vr(m,i.params,new URL(O,i.url),s))}const $=[],z=p.uses_env_dynamic_public&&n.prerendering,Q=[`base: ${j}`];if(ie&&Q.push(`assets: ${V(ie)}`),p.uses_env_dynamic_public&&Q.push(`env: ${z?"null":V(lt)}`),re){$.push("const deferred = new Map();"),Q.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`);let O="";Object.keys(r.hooks.transport).length>0&&(p.inline?O=`const app = __sveltekit_${r.version_hash}.app.app;`:p.app?O=`const app = await import(${V(H(p.app))});`:O=`const { app } = await import(${V(H(p.start))});`);const I=O?`${O}
							const [data, error] = fn(app);`:"const [data, error] = fn();";Q.push(`resolve: async (id, fn) => {
							${I}

							const try_to_resolve = () => {
								if (!deferred.has(id)) {
									setTimeout(try_to_resolve, 0);
									return;
								}
								const { fulfil, reject } = deferred.get(id);
								deferred.delete(id);
								if (error) reject(error);
								else fulfil(data);
							}
							try_to_resolve();
						}`)}$.push(`${D} = {
						${Q.join(`,
						`)}
					};`);const q=["element"];if($.push("const element = document.currentScript.parentElement;"),a.ssr){const O={form:"null",error:"null"};T&&(O.form=_s(T,i.route.id,r.hooks.transport)),c&&(O.error=K.uneval(c));const I=[`node_ids: [${e.map(({node:ne})=>ne.index).join(", ")}]`,`data: ${te}`,`form: ${O.form}`,`error: ${O.error}`];if(o!==200&&I.push(`status: ${o}`),s._.client.routes){if(m){const ne=Er(m,i.url,s).replaceAll(`
`,`
							`);I.push(`params: ${K.uneval(i.params)}`,`server_route: ${ne}`)}}else r.embedded&&I.push(`params: ${K.uneval(i.params)}`,`route: ${V(i.route)}`);const se="	".repeat(z?7:6);q.push(`{
${se}	${I.join(`,
${se}	`)}
${se}}`)}const{remote_data:N}=l;let M="";if(N){const O={};for(const[se,ne]of N)if(se.id)for(const Ue in ne)O[Ar(se.id,Ue)]=await ne[Ue];const I=se=>{for(const ne in r.hooks.transport){const Ue=r.hooks.transport[ne].encode(se);if(Ue)return`app.decode('${ne}', ${K.uneval(Ue,I)})`}};M=`${D}.data = ${K.uneval(O,I)};

						`}const L=p.inline?`${p.inline.script}

					${M}${D}.app.start(${q.join(", ")});`:p.app?`Promise.all([
						import(${V(H(p.start))}),
						import(${V(H(p.app))})
					]).then(([kit, app]) => {
						${M}kit.start(app, ${q.join(", ")});
					});`:`import(${V(H(p.start))}).then((app) => {
						${M}app.start(${q.join(", ")})
					});`;if(z?$.push(`import(${V(`${x}/${Oe}/env.js`)}).then(({ env }) => {
						${D}.env = env;

						${L.replace(/\n/g,`
	`)}
					});`):$.push(L),r.service_worker){let O="";if(r.service_worker_options!=null){const I={...r.service_worker_options};O=`, ${V(I)}`}$.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${H("service-worker.js")}'${O});
						});
					}`)}const X=`
				{
					${$.join(`

					`)}
				}
			`;U.add_script(X),P+=`
			<script${U.script_needs_nonce?` nonce="${U.nonce}"`:""}>${X}<\/script>
		`}const Y=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(n.prerendering){const m=[],$=U.csp_provider.get_meta();$&&m.push($),n.prerendering.cache&&m.push(`<meta http-equiv="cache-control" content="${n.prerendering.cache}">`),m.length>0&&(R=m.join(`
`)+R)}else{const m=U.csp_provider.get_header();m&&Y.set("content-security-policy",m);const $=U.report_only_provider.get_header();$&&Y.set("content-security-policy-report-only",$),_.size&&Y.set("link",Array.from(_).join(", "))}R+=b.head;const le=r.templates.app({head:R,body:P,assets:k,nonce:U.nonce,env:lt}),be=await u.transformPageChunk({html:le,done:!0})||"";return re||Y.set("etag",`"${yr(be)}"`),re?new Response(new ReadableStream({async start(m){m.enqueue(Je.encode(be+`
`));for await(const $ of re)$.length&&m.enqueue(Je.encode($));m.close()},type:"bytes"}),{headers:Y}):G(be,{status:o,headers:Y})}var ye,Fe;class Rt{constructor(t){W(this,ye);He(this,"data");this.data=t}layouts(){return this.data.slice(0,-1)}page(){return this.data.at(-1)}validate(){for(const r of this.layouts())r&&(Cr(r.server,r.server_id),zr(r.universal,r.universal_id));const t=this.page();t&&(Nr(t.server,t.server_id),Ur(t.universal,t.universal_id))}csr(){var t;return(t=Ie(this,ye,Fe).call(this,"csr"))!=null?t:!0}ssr(){var t;return(t=Ie(this,ye,Fe).call(this,"ssr"))!=null?t:!0}prerender(){var t;return(t=Ie(this,ye,Fe).call(this,"prerender"))!=null?t:!1}trailing_slash(){var t;return(t=Ie(this,ye,Fe).call(this,"trailingSlash"))!=null?t:"never"}get_config(){var r,s,n,a;let t={};for(const o of this.data)!((r=o==null?void 0:o.universal)!=null&&r.config)&&!((s=o==null?void 0:o.server)!=null&&s.config)||(t={...t,...(n=o==null?void 0:o.universal)==null?void 0:n.config,...(a=o==null?void 0:o.server)==null?void 0:a.config});return Object.keys(t).length?t:void 0}should_prerender_data(){return this.data.some(t=>{var r,s;return((r=t==null?void 0:t.server)==null?void 0:r.load)||((s=t==null?void 0:t.server)==null?void 0:s.trailingSlash)!==void 0})}}ye=new WeakSet,Fe=function(t){return this.data.reduce((r,s)=>{var n,a,o,c;return(c=(o=(n=s==null?void 0:s.universal)==null?void 0:n[t])!=null?o:(a=s==null?void 0:s.server)==null?void 0:a[t])!=null?c:r},void 0)};async function Rr({event:e,event_state:t,options:r,manifest:s,state:n,status:a,error:o,resolve_opts:c}){if(e.request.headers.get("x-sveltekit-error"))return Qe(r,a,o.message);const i=[];try{const l=[],u=await s._.nodes[0](),f=new Rt([u]),w=f.ssr(),p=f.csr(),y=Ge(e,t,r);if(w){n.error=!0;const h=vt({event:e,event_state:t,state:n,node:u,parent:async()=>({})}),d=await h;y.add_node(0,d);const _=await mr({event:e,event_state:t,fetched:i,node:u,parent:async()=>({}),resolve_opts:c,server_data_promise:h,state:n,csr:p});l.push({node:u,server_data:d,data:_},{node:await s._.nodes[1](),data:null,server_data:null})}return await Be({options:r,manifest:s,state:n,page_config:{ssr:w,csr:p},status:a,error:await ee(e,t,r,o),branch:l,fetched:i,event:e,event_state:t,resolve_opts:c,data_serializer:y})}catch(l){return l instanceof ae?Ze(l.status,l.location):Qe(r,qe(l),(await ee(e,t,r,l)).message)}}async function qs(e,t,r,s,n){return de({name:"sveltekit.remote.call",attributes:{},fn:a=>{const o=Pe(e,a);return J({event:o,state:t},()=>Ps(o,t,r,s,n))}})}async function Ps(e,t,r,s,n){const[a,o,c]=n.split("/"),i=s._.remotes;i[a]||st(404);const u=(await i[a]()).default[o];u||st(404);const f=u.__,w=r.hooks.transport;e.tracing.current.setAttributes({"sveltekit.remote.call.type":f.type,"sveltekit.remote.call.name":f.name});let p;try{if(f.type==="query_batch"){if(e.request.method!=="POST")throw new Z(405,"Method Not Allowed",`\`query.batch\` functions must be invoked via POST request, not ${e.request.method}`);const{payloads:_}=await e.request.json(),g=_.map(T=>Xe(T,w)),S=await J({event:e,state:t},()=>f.run(g)),b=await Promise.all(g.map(async(T,x)=>{try{return{type:"result",data:S(T,x)}}catch(k){return{type:"error",error:await ee(e,t,r,k),status:k instanceof Ae||k instanceof Z?k.status:500}}}));return oe({type:"result",result:Le(b,w)})}if(f.type==="form"){if(e.request.method!=="POST")throw new Z(405,"Method Not Allowed",`\`form\` functions must be invoked via POST request, not ${e.request.method}`);if(!wt(e.request))throw new Z(415,"Unsupported Media Type",`\`form\` functions expect form-encoded data — received ${e.request.headers.get("content-type")}`);const{data:_,meta:g,form_data:S}=await Vt(e.request);c&&!("id"in _)&&(_.id=JSON.parse(decodeURIComponent(c)));const b=f.fn,T=await J({event:e,state:t},()=>b(_,g,S));return oe({type:"result",result:Le(T,w),refreshes:T.issues?void 0:await y(g.remote_refreshes)})}if(f.type==="command"){const{payload:_,refreshes:g}=await e.request.json(),S=Xe(_,w),b=await J({event:e,state:t},()=>u(S));return oe({type:"result",result:Le(b,w),refreshes:await y(g)})}const h=f.type==="prerender"?c:new URL(e.request.url).searchParams.get("payload"),d=await J({event:e,state:t},()=>u(Xe(h,w)));return oe({type:"result",result:Le(d,w)})}catch(h){if(h instanceof ae)return oe({type:"redirect",location:h.location,refreshes:await y(p)});const d=h instanceof Ae||h instanceof Z?h.status:500;return oe({type:"error",error:await ee(e,t,r,h),status:d},{status:t.prerendering?d:void 0,headers:{"cache-control":"private, no-store"}})}async function y(h){var _,g,S;const d=(_=t.refreshes)!=null?_:{};if(h)for(const b of h){if(d[b]!==void 0)continue;const[T,x,k]=b.split("/"),j=s._.remotes[T],R=(S=(g=await(j==null?void 0:j()))==null?void 0:g.default)==null?void 0:S[x];R||st(400,"Bad Request"),d[b]=J({event:e,state:t},()=>R(Xe(k,w)))}if(Object.keys(d).length!==0)return Le(Object.fromEntries(await Promise.all(Object.entries(d).map(async([b,T])=>[b,await T]))),w)}}async function Cs(e,t,r,s){return de({name:"sveltekit.remote.form.post",attributes:{},fn:n=>{const a=Pe(e,n);return J({event:a,state:t},()=>zs(a,t,r,s))}})}async function zs(e,t,r,s){var u;const[n,a,o]=s.split("/"),c=r._.remotes,i=await((u=c[n])==null?void 0:u.call(c));let l=i==null?void 0:i.default[a];if(!l)return e.setHeaders({allow:"GET"}),{type:"error",error:new Z(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};o&&(l=J({event:e,state:t},()=>l.for(JSON.parse(o))));try{const f=l.__.fn,{data:w,meta:p,form_data:y}=await Vt(e.request);return o&&!("id"in w)&&(w.id=JSON.parse(decodeURIComponent(o))),await J({event:e,state:t},()=>f(w,p,y)),{type:"success",status:200}}catch(f){const w=f;return w instanceof ae?{type:"redirect",status:w.status,location:w.location}:{type:"error",error:xt(w)}}}function Ns(e){return e.pathname.startsWith(`${B}/${Oe}/remote/`)&&e.pathname.replace(`${B}/${Oe}/remote/`,"")}function Us(e){return e.searchParams.get("/remote")}const Hs=10;async function Is(e,t,r,s,n,a,o,c){if(a.depth>Hs)return G(`Not found: ${e.url.pathname}`,{status:404});if(lr(e)){const i=await n._.nodes[r.leaf]();return fs(e,t,s,i==null?void 0:i.server)}try{const i=o.page();let l=200,u;if(ps(e)){const k=Us(e.url);if(k?u=await Cs(e,t,n,k):u=await hs(e,t,i.server),(u==null?void 0:u.type)==="redirect")return Ze(u.status,u.location);(u==null?void 0:u.type)==="error"&&(l=qe(u.error)),(u==null?void 0:u.type)==="failure"&&(l=u.status)}const f=o.prerender();if(f){const k=i.server;if(k!=null&&k.actions)throw new Error("Cannot prerender pages with actions")}else if(a.prerendering)return new Response(void 0,{status:204});a.prerender_default=f;const w=o.should_prerender_data(),p=$t(e.url.pathname),y=[],h=o.ssr(),d=o.csr();if(h===!1&&!(a.prerendering&&w))return we&&u&&e.request.headers.has("x-sveltekit-action"),await Be({branch:[],fetched:y,page_config:{ssr:!1,csr:d},status:l,error:null,event:e,event_state:t,options:s,manifest:n,state:a,resolve_opts:c,data_serializer:Ge(e,t,s)});const _=[];let g=null;const S=Ge(e,t,s),b=a.prerendering&&w?_r(e,t,s):null,T=o.data.map((k,j)=>{if(g)throw g;return Promise.resolve().then(async()=>{try{if(k===i&&(u==null?void 0:u.type)==="error")throw u.error;const R=await vt({event:e,event_state:t,state:a,node:k,parent:async()=>{const P={};for(let U=0;U<j;U+=1){const H=await T[U];H&&Object.assign(P,H.data)}return P}});return k&&S.add_node(j,R),b==null||b.add_node(j,R),R}catch(R){throw g=R,g}})}),x=o.data.map((k,j)=>{if(g)throw g;return Promise.resolve().then(async()=>{try{return await mr({event:e,event_state:t,fetched:y,node:k,parent:async()=>{const R={};for(let P=0;P<j;P+=1)Object.assign(R,await x[P]);return R},resolve_opts:c,server_data_promise:T[j],state:a,csr:d})}catch(R){throw g=R,g}})});for(const k of T)k.catch(()=>{});for(const k of x)k.catch(()=>{});for(let k=0;k<o.data.length;k+=1){const j=o.data[k];if(j)try{const R=await T[k],P=await x[k];_.push({node:j,server_data:R,data:P})}catch(R){const P=R;if(P instanceof ae){if(a.prerendering&&w){const C=JSON.stringify({type:"redirect",location:P.location});a.prerendering.dependencies.set(p,{response:G(C),body:C})}return Ze(P.status,P.location)}const U=qe(P),H=await ee(e,t,s,P);for(;k--;)if(r.errors[k]){const C=r.errors[k],D=await n._.nodes[C]();let te=k;for(;!_[te];)te-=1;S.set_max_nodes(te+1);const re=dt(_.slice(0,te+1)),Y=new Rt(re.map(le=>le.node));return await Be({event:e,event_state:t,options:s,manifest:n,state:a,resolve_opts:c,page_config:{ssr:Y.ssr(),csr:Y.csr()},status:U,error:H,branch:re.concat({node:D,data:null,server_data:null}),fetched:y,data_serializer:S})}return Qe(s,U,H.message)}else _.push(null)}if(a.prerendering&&b){let{data:k,chunks:j}=b.get_data();if(j)for await(const R of j)k+=R;a.prerendering.dependencies.set(p,{response:G(k),body:k})}return await Be({event:e,event_state:t,options:s,manifest:n,state:a,resolve_opts:c,page_config:{csr:d,ssr:h},status:l,error:null,branch:h===!1?[]:dt(_),action_result:u,fetched:y,data_serializer:h===!1?Ge(e,t,s):S})}catch(i){return await Rr({event:e,event_state:t,options:s,manifest:n,state:a,status:500,error:i,resolve_opts:c})}}function Ls(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}async function Ds(e,t,r,s,n,a,o,c){if(!r.page)return new Response(void 0,{status:404});try{const i=[...r.page.layouts,r.page.leaf],l=o!=null?o:i.map(()=>!0);let u=!1;const f=new URL(e.url);f.pathname=yt(f.pathname,c);const w={...e,url:f},p=i.map((b,T)=>Ls(async()=>{try{if(u)return{type:"skip"};const x=b==null?b:await n._.nodes[b]();return vt({event:w,event_state:t,state:a,node:x,parent:async()=>{const k={};for(let j=0;j<T;j+=1){const R=await p[j]();R&&Object.assign(k,R.data)}return k}})}catch(x){throw u=!0,x}})),y=p.map(async(b,T)=>l[T]?b():{type:"skip"});let h=y.length;const d=await Promise.all(y.map((b,T)=>b.catch(async x=>{if(x instanceof ae)throw x;return h=Math.min(h,T+1),{type:"error",error:await ee(e,t,s,x),status:x instanceof Ae||x instanceof Z?x.status:void 0}}))),_=_r(e,t,s);for(let b=0;b<d.length;b++)_.add_node(b,d[b]);const{data:g,chunks:S}=_.get_data();return S?new Response(new ReadableStream({async start(b){b.enqueue(Je.encode(g));for await(const T of S)b.enqueue(Je.encode(T));b.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):ht(g)}catch(i){const l=i;return l instanceof ae?_t(l):ht(await ee(e,t,s,l),500)}}function ht(e,t=200){return G(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function _t(e){return ht({type:"redirect",location:e.location})}const Ws=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function at(e){if((e==null?void 0:e.path)===void 0)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function Ms(e,t,r){return`${e||""}${t}?${encodeURIComponent(r)}`}function Fs(e,t){var w;const r=(w=e.headers.get("cookie"))!=null?w:"",s=Ke(r,{decode:p=>p});let n;const a=new Map,o={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},c={get(p,y){const h=Array.from(a.values()).filter(g=>g.name===p&&ot(t.hostname,g.options.domain)&&it(t.pathname,g.options.path)).sort((g,S)=>S.options.path.length-g.options.path.length)[0];return h?h.options.maxAge===0?void 0:h.value:Ke(r,{decode:y==null?void 0:y.decode})[p]},getAll(p){const y=Ke(r,{decode:p==null?void 0:p.decode}),h=new Map;for(const d of a.values())if(ot(t.hostname,d.options.domain)&&it(t.pathname,d.options.path)){const _=h.get(d.name);(!_||d.options.path.length>_.options.path.length)&&h.set(d.name,d)}for(const d of h.values())y[d.name]=d.value;return Object.entries(y).map(([d,_])=>({name:d,value:_}))},set(p,y,h){const d=p.match(Ws);d&&console.warn(`The cookie name "${p}" will be invalid in SvelteKit 3.0 as it contains ${d.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),at(h),u(p,y,{...o,...h})},delete(p,y){at(y),c.set(p,"",{...y,maxAge:0})},serialize(p,y,h){at(h);let d=h.path;if(!h.domain||h.domain===t.hostname){if(!n)throw new Error("Cannot serialize cookies until after the route is determined");d=Ot(n,d)}return ut(p,y,{...o,...h,path:d})}};function i(p,y){const h={...s};for(const d of a.values()){if(!ot(p.hostname,d.options.domain)||!it(p.pathname,d.options.path))continue;const _=d.options.encode||encodeURIComponent;h[d.name]=_(d.value)}if(y){const d=Ke(y,{decode:_=>_});for(const _ in d)h[_]=d[_]}return Object.entries(h).map(([d,_])=>`${d}=${_}`).join("; ")}const l=[];function u(p,y,h){if(!n){l.push(()=>u(p,y,h));return}let d=h.path;(!h.domain||h.domain===t.hostname)&&(d=Ot(n,d));const _=Ms(h.domain,d,p),g={name:p,value:y,options:{...h,path:d}};a.set(_,g)}function f(p){n=yt(t.pathname,p),l.forEach(y=>y())}return{cookies:c,new_cookies:a,get_cookie_header:i,set_internal:u,set_trailing_slash:f}}function ot(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function it(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function It(e,t){for(const r of t){const{name:s,value:n,options:a}=r;if(e.append("set-cookie",ut(s,n,a)),a.path.endsWith(".html")){const o=$t(a.path);e.append("set-cookie",ut(s,n,{...a,path:o}))}}}function Gs({event:e,options:t,manifest:r,state:s,get_cookie_header:n,set_internal:a}){const o=async(c,i)=>{var w,p;const l=Lt(c,i,e.url);let u=(w=c instanceof Request?c.mode:i==null?void 0:i.mode)!=null?w:"cors",f=(p=c instanceof Request?c.credentials:i==null?void 0:i.credentials)!=null?p:"same-origin";return t.hooks.handleFetch({event:e,request:l,fetch:async(y,h)=>{var P,U,H;const d=Lt(y,h,e.url),_=new URL(d.url);if(d.headers.has("origin")||d.headers.set("origin",e.url.origin),y!==l&&(u=(P=y instanceof Request?y.mode:h==null?void 0:h.mode)!=null?P:"cors",f=(U=y instanceof Request?y.credentials:h==null?void 0:h.credentials)!=null?U:"same-origin"),(d.method==="GET"||d.method==="HEAD")&&(u==="no-cors"&&_.origin!==e.url.origin||_.origin===e.url.origin)&&d.headers.delete("origin"),_.origin!==e.url.origin){if(`.${_.hostname}`.endsWith(`.${e.url.hostname}`)&&f!=="omit"){const C=n(_,d.headers.get("cookie"));C&&d.headers.set("cookie",C)}return fetch(d)}const g=ie||B,S=decodeURIComponent(_.pathname),b=(S.startsWith(g)?S.slice(g.length):S).slice(1),T=`${b}/index.html`,x=r.assets.has(b)||b in r._.server_assets,k=r.assets.has(T)||T in r._.server_assets;if(x||k){const C=x?b:T;if(s.read){const D=x?r.mimeTypes[b.slice(b.lastIndexOf("."))]:"text/html";return new Response(s.read(C),{headers:D?{"content-type":D}:{}})}else if(Pt&&C in r._.server_assets){const D=r._.server_assets[C],te=r.mimeTypes[C.slice(C.lastIndexOf("."))];return new Response(Pt(C),{headers:{"Content-Length":""+D,"Content-Type":te}})}return await fetch(d)}if(or(r,B+S))return await fetch(d);if(f!=="omit"){const C=n(_,d.headers.get("cookie"));C&&d.headers.set("cookie",C);const D=e.request.headers.get("authorization");D&&!d.headers.has("authorization")&&d.headers.set("authorization",D)}d.headers.has("accept")||d.headers.set("accept","*/*"),d.headers.has("accept-language")||d.headers.set("accept-language",e.request.headers.get("accept-language"));const j=await Bs(d,t,r,s),R=j.headers.get("set-cookie");if(R)for(const C of Ct.splitCookiesString(R)){const{name:D,value:te,...re}=Ct.parseString(C,{decodeValues:!1}),Y=(H=re.path)!=null?H:_.pathname.split("/").slice(0,-1).join("/")||"/";a(D,te,{path:Y,encode:le=>le,...re})}return j}})};return(c,i)=>{const l=o(c,i);return l.catch(()=>{}),l}}function Lt(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}async function Bs(e,t,r,s){if(e.signal){if(e.signal.aborted)throw new DOMException("The operation was aborted.","AbortError");let n=()=>{};const a=new Promise((c,i)=>{const l=()=>{i(new DOMException("The operation was aborted.","AbortError"))};e.signal.addEventListener("abort",l,{once:!0}),n=()=>e.signal.removeEventListener("abort",l)}),o=await Promise.race([mt(e,t,r,{...s,depth:s.depth+1}),a]);return n(),o}else return await mt(e,t,r,{...s,depth:s.depth+1})}let Ye,De,We;function Js(e){return Ye!=null||(Ye=`export const env=${JSON.stringify(lt)}`),De!=null||(De=`W/${Date.now()}`),We!=null||(We=new Headers({"content-type":"application/javascript; charset=utf-8",etag:De})),e.headers.get("if-none-match")===De?new Response(void 0,{status:304,headers:We}):new Response(Ye,{headers:We})}const Dt=({html:e})=>e,Wt=()=>!1,Mt=({type:e})=>e==="js"||e==="css",Vs=new Set(["GET","HEAD","POST"]),Xs=new Set(["GET","HEAD","OPTIONS"]);const mt=Qs(Ks);async function Ks(e,t,r,s){var x,k,j,R,P,U,H,C,D,te,re,Y,le,be,Ce,ze,Ne;const n=new URL(e.url),a=cs(n.pathname),o=os(n.pathname),c=Ns(n);{const E=e.headers.get("origin");if(c){if(e.method!=="GET"&&E!==n.origin)return oe({message:"Cross-site remote requests are forbidden"},{status:403})}else if(t.csrf_check_origin&&wt(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&E!==n.origin&&(!E||!t.csrf_trusted_origins.includes(E))){const m=`Cross-site ${e.method} form submissions are forbidden`,$={status:403};return e.headers.get("accept")==="application/json"?oe({message:m},$):G(m,$)}}if(t.hash_routing&&n.pathname!==B+"/"&&n.pathname!=="/[fallback]")return G("Not found",{status:404});let i;a?n.pathname=ls(n.pathname):o?(n.pathname=is(n.pathname)+(n.searchParams.get(St)==="1"?"/":"")||"/",n.searchParams.delete(St),i=(x=n.searchParams.get(Tt))==null?void 0:x.split("").map(E=>E==="1"),n.searchParams.delete(Tt)):c&&(n.pathname=(k=e.headers.get("x-sveltekit-pathname"))!=null?k:B,n.search=(j=e.headers.get("x-sveltekit-search"))!=null?j:"");const l={},{cookies:u,new_cookies:f,get_cookie_header:w,set_internal:p,set_trailing_slash:y}=Fs(e,n),h={prerendering:s.prerendering,transport:t.hooks.transport,handleValidationError:t.hooks.handleValidationError,tracing:{record_span:de},is_in_remote_function:!1},d={cookies:u,fetch:null,getClientAddress:s.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-static does not specify getClientAddress. Please raise an issue")}),locals:{},params:{},platform:s.platform,request:e,route:{id:null},setHeaders:E=>{for(const A in E){const m=A.toLowerCase(),$=E[A];if(m==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(m in l)if(m==="server-timing")l[m]+=", "+$;else throw new Error(`"${A}" header is already set`);else l[m]=$,s.prerendering&&m==="cache-control"&&(s.prerendering.cache=$)}},url:n,isDataRequest:o,isSubRequest:s.depth>0,isRemoteRequest:!!c};d.fetch=Gs({event:d,options:t,manifest:r,state:s,get_cookie_header:w,set_internal:p}),(R=s.emulator)!=null&&R.platform&&(d.platform=await s.emulator.platform({config:{},prerender:!!((P=s.prerendering)!=null&&P.fallback)}));let _=n.pathname;if(!c){const E=(U=s.prerendering)==null?void 0:U.inside_reroute;try{s.prerendering&&(s.prerendering.inside_reroute=!0),_=(H=await t.hooks.reroute({url:new URL(n),fetch:d.fetch}))!=null?H:n.pathname}catch{return G("Internal Server Error",{status:500})}finally{s.prerendering&&(s.prerendering.inside_reroute=E)}}try{_=Hr(_)}catch{return G("Malformed URI",{status:400})}if(_!==n.pathname&&!((C=s.prerendering)!=null&&C.fallback)&&or(r,_)){const E=new URL(e.url);E.pathname=o?$t(_):a?cr(_):_;const A=await fetch(E,e),m=new Headers(A.headers);return m.has("content-encoding")&&(m.delete("content-encoding"),m.delete("content-length")),new Response(A.body,{headers:m,status:A.status,statusText:A.statusText})}let g=null;if(B&&!((D=s.prerendering)!=null&&D.fallback)){if(!_.startsWith(B))return G("Not found",{status:404});_=_.slice(B.length)||"/"}if(a)return Ts(_,new URL(e.url),r);if(_===`/${Oe}/env.js`)return Js(e);if(!c&&_.startsWith(`/${Oe}`)){const E=new Headers;return E.set("cache-control","public, max-age=0, must-revalidate"),G("Not found",{status:404,headers:E})}if(!((te=s.prerendering)!=null&&te.fallback)){const E=await r._.matchers();for(const A of r._.routes){const m=A.pattern.exec(_);if(!m)continue;const $=$r(m,A.params,E);if($){g=A,d.route={id:g.id},d.params=Kt($);break}}}let S={transformPageChunk:Dt,filterSerializedResponseHeaders:Wt,preload:Mt},b="never";try{const E=g!=null&&g.page?new Rt(await Ys(g.page,r)):void 0;if(g&&!c){if(n.pathname===B||n.pathname===B+"/"?b="always":E?b=E.trailing_slash():g.endpoint&&(b=(re=(await g.endpoint()).trailingSlash)!=null?re:"never"),!o){const m=yt(n.pathname,b);if(m!==n.pathname&&!((Y=s.prerendering)!=null&&Y.fallback))return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(m.startsWith("//")?n.origin+m:m)+(n.search==="?"?"":n.search)}})}if(s.before_handle||(le=s.emulator)!=null&&le.platform){let m={},$=!1;if(g.endpoint){const z=await g.endpoint();m=(be=z.config)!=null?be:m,$=(Ce=z.prerender)!=null?Ce:$}else E&&(m=(ze=E.get_config())!=null?ze:m,$=E.prerender());s.before_handle&&s.before_handle(d,m,$),(Ne=s.emulator)!=null&&Ne.platform&&(d.platform=await s.emulator.platform({config:m,prerender:$}))}}y(b),s.prerendering&&!s.prerendering.fallback&&!s.prerendering.inside_reroute&&Xt(n);const A=await de({name:"sveltekit.handle.root",attributes:{"http.route":d.route.id||"unknown","http.method":d.request.method,"http.url":d.url.href,"sveltekit.is_data_request":o,"sveltekit.is_sub_request":d.isSubRequest},fn:async m=>{const $={...d,tracing:{enabled:!1,root:m,current:m}};return await J({event:$,state:h},()=>t.hooks.handle({event:$,resolve:(z,Q)=>de({name:"sveltekit.resolve",attributes:{"http.route":z.route.id||"unknown"},fn:q=>J(null,()=>T(Pe(z,q),E,Q).then(N=>{for(const M in l){const L=l[M];N.headers.set(M,L)}return It(N.headers,f.values()),s.prerendering&&z.route.id!==null&&N.headers.set("x-sveltekit-routeid",encodeURI(z.route.id)),q.setAttributes({"http.response.status_code":N.status,"http.response.body.size":N.headers.get("content-length")||"unknown"}),N}))})}))}});if(A.status===200&&A.headers.has("etag")){let m=e.headers.get("if-none-match");m!=null&&m.startsWith('W/"')&&(m=m.substring(2));const $=A.headers.get("etag");if(m===$){const z=new Headers({etag:$});for(const Q of["cache-control","content-location","date","expires","vary","set-cookie"]){const q=A.headers.get(Q);q&&z.set(Q,q)}return new Response(void 0,{status:304,headers:z})}}if(o&&A.status>=300&&A.status<=308){const m=A.headers.get("location");if(m)return _t(new ae(A.status,m))}return A}catch(E){if(E instanceof ae){const A=o||c?_t(E):g!=null&&g.page&&lr(d)?ur(E):Ze(E.status,E.location);return It(A.headers,f.values()),A}return await zt(d,h,t,E)}async function T(E,A,m){var $,z,Q,q;try{if(m&&(S={transformPageChunk:m.transformPageChunk||Dt,filterSerializedResponseHeaders:m.filterSerializedResponseHeaders||Wt,preload:m.preload||Mt}),t.hash_routing||($=s.prerendering)!=null&&$.fallback)return await Be({event:E,event_state:h,options:t,manifest:r,state:s,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:S,data_serializer:Ge(E,h,t)});if(c)return await qs(E,h,t,r,c);if(g){const M=E.request.method;let L;if(o)L=await Ds(E,h,g,t,r,s,i,b);else if(g.endpoint&&(!g.page||as(E)))L=await ns(E,h,await g.endpoint(),s);else if(g.page)if(A)if(Vs.has(M))L=await Is(E,h,g.page,t,r,s,A,S);else{const X=new Set(Xs),O=await r._.nodes[g.page.leaf]();if((z=O==null?void 0:O.server)!=null&&z.actions&&X.add("POST"),M==="OPTIONS")L=new Response(null,{status:204,headers:{allow:Array.from(X.values()).join(", ")}});else{const I=[...X].reduce((se,ne)=>(se[ne]=!0,se),{});L=rr(I,M)}}else throw new Error("page_nodes not found. This should never happen");else throw new Error("Route is neither page nor endpoint. This should never happen");if(e.method==="GET"&&g.page&&g.endpoint){const X=(q=(Q=L.headers.get("vary"))==null?void 0:Q.split(","))==null?void 0:q.map(O=>O.trim().toLowerCase());X!=null&&X.includes("accept")||X!=null&&X.includes("*")||(L=new Response(L.body,{status:L.status,statusText:L.statusText,headers:new Headers(L.headers)}),L.headers.append("Vary","Accept"))}return L}if(s.error&&E.isSubRequest){const M=new Headers(e.headers);return M.set("x-sveltekit-error","true"),await fetch(e,{headers:M})}if(s.error)return G("Internal Server Error",{status:500});if(s.depth===0)return we&&E.url.pathname,await Rr({event:E,event_state:h,options:t,manifest:r,state:s,status:404,error:new Z(404,"Not Found",`Not found: ${E.url.pathname}`),resolve_opts:S});if(s.prerendering)return G("not found",{status:404});const N=await fetch(e);return new Response(N.body,N)}catch(N){return await zt(E,h,t,N)}finally{E.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},E.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function Ys(e,t){return Promise.all([...e.layouts.map(r=>r==null?r:t._.nodes[r]()),t._.nodes[e.leaf]()])}function Qs(e){return async(t,...r)=>e(t,...r)}function Ft(e,t,r){return Object.fromEntries(Object.entries(e).filter(([s])=>s.startsWith(t)&&(r===""||!s.startsWith(r))))}let ct,Gt=null;var ge,Ve;class hn{constructor(t){W(this,ge);W(this,Ve);if(F(this,ge,Wr),F(this,Ve,t),Vr){const r=this.respond.bind(this);this.respond=async(...s)=>{const{promise:n,resolve:a}=Yt(),o=Gt;return Gt=n,await o,r(...s).finally(a)}}}async init({env:t,read:r}){const{env_public_prefix:s,env_private_prefix:n}=v(this,ge);Mr(Ft(t,n,s)),Fr(Ft(t,s,n)),r&&Br(o=>{const c=r(o);return c instanceof ReadableStream?c:new ReadableStream({async start(i){try{const l=await Promise.resolve(c);if(!l){i.close();return}const u=l.getReader();for(;;){const{done:f,value:w}=await u.read();if(f)break;i.enqueue(w)}i.close()}catch(l){i.error(l)}}})}),await(ct!=null?ct:ct=(async()=>{try{const a=await Gr();v(this,ge).hooks={handle:a.handle||(({event:o,resolve:c})=>c(o)),handleError:a.handleError||(({status:o,error:c,event:i})=>{const l=ss(o,c,i);console.error(l)}),handleFetch:a.handleFetch||(({request:o,fetch:c})=>c(o)),handleValidationError:a.handleValidationError||(({issues:o})=>(console.error("Remote function schema validation failed:",o),{message:"Bad Request"})),reroute:a.reroute||(()=>{}),transport:a.transport||{}},a.transport&&Object.fromEntries(Object.entries(a.transport).map(([o,c])=>[o,c.decode])),a.init&&await a.init()}catch(a){throw a}})())}async respond(t,r){return mt(t,v(this,ge),v(this,Ve),{...r,error:!1,depth:0})}}ge=new WeakMap,Ve=new WeakMap;export{hn as Server};
