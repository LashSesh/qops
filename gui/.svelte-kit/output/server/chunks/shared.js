var B=n=>{throw TypeError(n)};var M=(n,t,e)=>t.has(n)||B("Cannot "+e);var b=(n,t,e)=>(M(n,t,"read from private field"),e?e.call(n):t.get(n)),$=(n,t,e)=>t.has(n)?B("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),v=(n,t,e,i)=>(M(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e);import*as R from"devalue";import{t as L,b as F,c as N}from"./utils.js";const K=!1;function C(n,t,e){t.startsWith("n:")?(t=t.slice(2),e=e===""?void 0:parseFloat(e)):t.startsWith("b:")&&(t=t.slice(2),e=e==="on"),V(n,Y(t),e)}function S(n){const t={};for(let e of n.keys()){const i=e.endsWith("[]");let r=n.getAll(e);if(i&&(e=e.slice(0,-2)),r.length>1&&!i)throw new Error(`Form cannot contain duplicated keys â€” "${e}" has ${r.length} values`);r=r.filter(s=>typeof s=="string"||s.name!==""||s.size>0),e.startsWith("n:")?(e=e.slice(2),r=r.map(s=>s===""?void 0:parseFloat(s))):e.startsWith("b:")&&(e=e.slice(2),r=r.map(s=>s==="on")),C(t,e,i?r:r[0])}return t}const W="application/x-sveltekit-formdata",T=0;async function Q(n){if(n.headers.get("content-type")!==W){const f=await n.formData();return{data:S(f),meta:{},form_data:f}}if(!n.body)throw new Error("Could not deserialize binary form: no body");const t=n.body.getReader(),e=[];async function i(f){if(f in e)return e[f];let o=e.length;for(;o<=f;)e[o]=t.read().then(u=>u.value),o++;return e[f]}async function r(f,o){let u,d=0,_;for(_=0;;_++){const g=await i(_);if(!g)return null;const P=d+g.byteLength;if(f>=d&&f<P){u=g;break}d=P}if(f+o<=d+u.byteLength)return u.subarray(f-d,f+o-d);const O=new Uint8Array(o);O.set(u.subarray(f-d));let z=u.byteLength-f+d;for(;z<o;){_++;let g=await i(_);if(!g)return null;g.byteLength>o-z&&(g=g.subarray(0,o-z)),O.set(g,z),z+=g.byteLength}return O}const s=await r(0,7);if(!s)throw new Error("Could not deserialize binary form: too short");if(s[0]!==T)throw new Error(`Could not deserialize binary form: got version ${s[0]}, expected version ${T}`);const l=new DataView(s.buffer),c=l.getUint32(1,!0),y=l.getUint16(5,!0),k=await r(7,c);if(!k)throw new Error("Could not deserialize binary form: data too short");let a,m;if(y>0){const f=await r(7+c,y);if(!f)throw new Error("Could not deserialize binary form: file offset table too short");a=JSON.parse(L.decode(f)),m=7+c+y}const[h,p]=R.parse(L.decode(k),{File:([f,o,u,d,_])=>new Proxy(new I(f,o,u,d,i,m+a[_]),{getPrototypeOf(){return File.prototype}})});return(async()=>{let f=!0;for(;f;)f=!!await i(e.length)})(),{data:h,meta:p,form_data:null}}var A,w,E;const j=class j{constructor(t,e,i,r,s,l){$(this,A);$(this,w);$(this,E);this.name=t,this.type=e,this.size=i,this.lastModified=r,this.webkitRelativePath="",v(this,A,s),v(this,w,l),this.arrayBuffer=this.arrayBuffer.bind(this),this.bytes=this.bytes.bind(this),this.slice=this.slice.bind(this),this.stream=this.stream.bind(this),this.text=this.text.bind(this)}async arrayBuffer(){var t;return(t=b(this,E))!=null||v(this,E,await new Response(this.stream()).arrayBuffer()),b(this,E)}async bytes(){return new Uint8Array(await this.arrayBuffer())}slice(t=0,e=this.size,i=this.type){t<0?t=Math.max(this.size+t,0):t=Math.min(t,this.size),e<0?e=Math.max(this.size+e,0):e=Math.min(e,this.size);const r=Math.max(e-t,0);return new j(this.name,i,r,this.lastModified,b(this,A),b(this,w)+t)}stream(){let t=0,e=0;return new ReadableStream({start:async i=>{let r=0,s=null;for(e=0;;e++){const l=await b(this,A).call(this,e);if(!l)return null;const c=r+l.byteLength;if(b(this,w)>=r&&b(this,w)<c){s=l;break}r=c}b(this,w)+this.size<=r+s.byteLength?(i.enqueue(s.subarray(b(this,w)-r,b(this,w)+this.size-r)),i.close()):(i.enqueue(s.subarray(b(this,w)-r)),t=s.byteLength-b(this,w)+r)},pull:async i=>{e++;let r=await b(this,A).call(this,e);if(!r){i.error("Could not deserialize binary form: incomplete file data"),i.close();return}r.byteLength>this.size-t&&(r=r.subarray(0,this.size-t)),i.enqueue(r),t+=r.byteLength,t>=this.size&&i.close()}})}async text(){return L.decode(await this.arrayBuffer())}};A=new WeakMap,w=new WeakMap,E=new WeakMap;let I=j;const U=/^[a-zA-Z_$]\w*(\.[a-zA-Z_$]\w*|\[\d+\])*$/;function Y(n){if(!U.test(n))throw new Error(`Invalid path ${n}`);return n.split(/\.|\[|\]/).filter(Boolean)}function D(n){if(n==="__proto__"||n==="constructor"||n==="prototype")throw new Error(`Invalid key "${n}"`)}function V(n,t,e){let i=n;for(let s=0;s<t.length-1;s+=1){const l=t[s];D(l);const c=/^\d+$/.test(t[s+1]),y=l in i,k=i[l];if(y&&c!==Array.isArray(k))throw new Error(`Invalid array key ${t[s+1]}`);y||(i[l]=c?[]:{}),i=i[l]}const r=t[t.length-1];D(r),i[r]=e}function X(n,t=!1){const e={name:"",path:[],message:n.message,server:t};if(n.path!==void 0){let i="";for(const r of n.path){const s=typeof r=="object"?r.key:r;e.path.push(s),typeof s=="number"?i+=`[${s}]`:typeof s=="string"&&(i+=i===""?s:"."+s)}e.name=i}return e}function ee(n){var e,i;const t={};for(const r of n){((e=t.$)!=null?e:t.$=[]).push(r);let s="";if(r.path!==void 0)for(const l of r.path)typeof l=="number"?s+=`[${l}]`:typeof l=="string"&&(s+=s===""?l:"."+l),((i=t[s])!=null?i:t[s]=[]).push(r)}return t}function Z(n,t){let e=n;for(const i of t){if(e==null||typeof e!="object")return e;e=e[i]}return e}function x(n,t,e,i,r=[]){const s=()=>Z(t(),r);return new Proxy(n,{get(l,c){if(typeof c=="symbol")return l[c];if(/^\d+$/.test(c))return x({},t,e,i,[...r,parseInt(c,10)]);const y=G(r);return c==="set"?x(function(a){return e(r,a),a},t,e,i,[...r,c]):c==="value"?x(s,t,e,i,[...r,c]):c==="issues"||c==="allIssues"?x(()=>{var m;const a=i()[y===""?"$":y];return c==="allIssues"?a==null?void 0:a.map(h=>({path:h.path,message:h.message})):(m=a==null?void 0:a.filter(h=>h.name===y))==null?void 0:m.map(h=>({path:h.path,message:h.message}))},t,e,i,[...r,c]):c==="as"?x((a,m)=>{const h=a==="file multiple"||a==="select multiple"||a==="checkbox"&&typeof m=="string",f={name:(a==="number"||a==="range"?"n:":a==="checkbox"&&!h?"b:":"")+y+(h?"[]":""),get"aria-invalid"(){const o=i();return y in o?"true":void 0}};return a!=="text"&&a!=="select"&&a!=="select multiple"&&(f.type=a==="file multiple"?"file":a),a==="submit"||a==="hidden"?Object.defineProperties(f,{value:{value:m,enumerable:!0}}):a==="select"||a==="select multiple"?Object.defineProperties(f,{multiple:{value:h,enumerable:!0},value:{enumerable:!0,get(){return s()}}}):a==="checkbox"||a==="radio"?Object.defineProperties(f,{value:{value:m!=null?m:"on",enumerable:!0},checked:{enumerable:!0,get(){const o=s();return a==="radio"?o===m:h?(o!=null?o:[]).includes(m):o}}}):a==="file"||a==="file multiple"?Object.defineProperties(f,{multiple:{value:h,enumerable:!0},files:{enumerable:!0,get(){const o=s();if(o instanceof File){if(typeof DataTransfer<"u"){const u=new DataTransfer;return u.items.add(o),u.files}return{0:o,length:1}}if(Array.isArray(o)&&o.every(u=>u instanceof File)){if(typeof DataTransfer<"u"){const d=new DataTransfer;return o.forEach(_=>d.items.add(_)),d.files}const u={length:o.length};return o.forEach((d,_)=>{u[_]=d}),u}return null}}}):Object.defineProperties(f,{value:{enumerable:!0,get(){const o=s();return o!=null?String(o):""}}})},t,e,i,[...r,"as"]):x({},t,e,i,[...r,c])}})}function G(n){let t="";for(const e of n)typeof e=="number"?t+=`[${e}]`:t+=t===""?e:"."+e;return t}const te="x-sveltekit-invalidated",re="x-sveltekit-trailing-slash";function H(n,t){const e=Object.fromEntries(Object.entries(t).map(([i,r])=>[i,r.encode]));return R.stringify(n,e)}function ne(n,t){if(n===void 0)return"";const e=H(n,t),i=new TextEncoder().encode(e);return F(i).replaceAll("=","").replaceAll("+","-").replaceAll("/","_")}function ie(n,t){if(!n)return;const e=L.decode(N(n.replaceAll("-","+").replaceAll("_","/"))),i=Object.fromEntries(Object.entries(t).map(([r,s])=>[r,s.decode]));return R.parse(e,i)}function se(n,t){return n+"/"+t}export{W as B,te as I,re as T,K as a,ne as b,se as c,Q as d,x as e,ee as f,C as g,V as h,X as n,ie as p,H as s};
